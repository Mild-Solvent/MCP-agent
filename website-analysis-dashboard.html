<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <title>Website Analysis Dashboard</title>
</head>
<body class="bg-gray-100 text-gray-800">
    <div class="container mx-auto p-4 max-w-7xl">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-800 mb-2">ü§ñ AI Website Analysis Dashboard</h1>
            <p class="text-gray-600">Powered by FastAPI MCP Server & AI Agent</p>
        </div>

        <!-- Status Banner -->
        <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-6">
            <div class="flex items-center">
                <span class="text-lg mr-2">‚úÖ</span>
                <span class="font-semibold">MCP Server Status: </span>
                <span class="ml-1">Running on localhost:8000</span>
            </div>
        </div>

        <!-- Main Content Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
            <!-- Agent Workflow -->
            <div class="bg-white p-6 rounded-lg shadow-lg border">
                <h2 class="text-2xl font-bold mb-4 text-blue-600 flex items-center">
                    <span class="mr-2">üîÑ</span>
                    The Agent's Workflow (Process)
                </h2>
                <div class="space-y-3">
                    <div class="flex items-start">
                        <span class="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-3 mt-0.5">1</span>
                        <p class="text-gray-700">Connecting to MCP Server endpoints</p>
                    </div>
                    <div class="flex items-start">
                        <span class="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-3 mt-0.5">2</span>
                        <p class="text-gray-700">Collecting website traffic data from <code class="bg-gray-100 px-1 rounded">/tools/get_website_traffic</code></p>
                    </div>
                    <div class="flex items-start">
                        <span class="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-3 mt-0.5">3</span>
                        <p class="text-gray-700">Analyzing top pages via <code class="bg-gray-100 px-1 rounded">/tools/get_top_pages</code></p>
                    </div>
                    <div class="flex items-start">
                        <span class="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-3 mt-0.5">4</span>
                        <p class="text-gray-700">Fetching traffic sources from <code class="bg-gray-100 px-1 rounded">/tools/get_traffic_sources</code></p>
                    </div>
                    <div class="flex items-start">
                        <span class="bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-3 mt-0.5">5</span>
                        <p class="text-gray-700">Generating insights and recommendations</p>
                    </div>
                </div>
            </div>

            <!-- Quick Stats -->
            <div class="bg-white p-6 rounded-lg shadow-lg border">
                <h2 class="text-2xl font-bold mb-4 text-green-600 flex items-center">
                    <span class="mr-2">üìä</span>
                    Key Metrics Overview
                </h2>
                <div class="grid grid-cols-2 gap-4">
                    <div class="text-center p-4 bg-blue-50 rounded-lg">
                        <div class="text-2xl font-bold text-blue-600">15,000</div>
                        <div class="text-gray-600">Total Users</div>
                        <div class="text-sm text-gray-500">Last 30 Days</div>
                    </div>
                    <div class="text-center p-4 bg-red-50 rounded-lg">
                        <div class="text-2xl font-bold text-red-600">45%</div>
                        <div class="text-gray-600">Bounce Rate</div>
                        <div class="text-sm text-gray-500">Needs Improvement</div>
                    </div>
                    <div class="text-center p-4 bg-green-50 rounded-lg">
                        <div class="text-2xl font-bold text-green-600">10K</div>
                        <div class="text-gray-600">Total Views</div>
                        <div class="text-sm text-gray-500">Top 3 Pages</div>
                    </div>
                    <div class="text-center p-4 bg-purple-50 rounded-lg">
                        <div class="text-2xl font-bold text-purple-600">3</div>
                        <div class="text-gray-600">Traffic Sources</div>
                        <div class="text-sm text-gray-500">Tracked</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Detailed Analysis Results -->
        <div class="bg-white p-6 rounded-lg shadow-lg border mb-6">
            <h2 class="text-2xl font-bold mb-6 text-purple-600 flex items-center">
                <span class="mr-2">üîç</span>
                Detailed Website Analysis Results
            </h2>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- Top Pages Analysis -->
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h3 class="text-lg font-semibold mb-3 flex items-center">
                        <span class="mr-2">üìÑ</span>
                        Top Performing Pages
                    </h3>
                    <div class="space-y-2">
                        <div class="flex justify-between items-center bg-white p-2 rounded">
                            <span class="text-sm font-medium">/home</span>
                            <span class="text-sm text-gray-600 bg-blue-100 px-2 py-1 rounded">5,000 views</span>
                        </div>
                        <div class="flex justify-between items-center bg-white p-2 rounded">
                            <span class="text-sm font-medium">/about</span>
                            <span class="text-sm text-gray-600 bg-blue-100 px-2 py-1 rounded">3,000 views</span>
                        </div>
                        <div class="flex justify-between items-center bg-white p-2 rounded">
                            <span class="text-sm font-medium">/contact</span>
                            <span class="text-sm text-gray-600 bg-blue-100 px-2 py-1 rounded">2,000 views</span>
                        </div>
                    </div>
                </div>

                <!-- Traffic Sources -->
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h3 class="text-lg font-semibold mb-3 flex items-center">
                        <span class="mr-2">üö¶</span>
                        Traffic Sources
                    </h3>
                    <div class="space-y-2">
                        <div class="flex justify-between items-center bg-white p-2 rounded">
                            <span class="text-sm font-medium">Organic Search</span>
                            <span class="text-sm text-gray-600 bg-green-100 px-2 py-1 rounded">7,000 users</span>
                        </div>
                        <div class="flex justify-between items-center bg-white p-2 rounded">
                            <span class="text-sm font-medium">Direct</span>
                            <span class="text-sm text-gray-600 bg-green-100 px-2 py-1 rounded">5,000 users</span>
                        </div>
                        <div class="flex justify-between items-center bg-white p-2 rounded">
                            <span class="text-sm font-medium">Referral</span>
                            <span class="text-sm text-gray-600 bg-green-100 px-2 py-1 rounded">3,000 users</span>
                        </div>
                    </div>
                </div>

                <!-- JSON API Response -->
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h3 class="text-lg font-semibold mb-3 flex items-center">
                        <span class="mr-2">‚ö°</span>
                        Live API Response
                    </h3>
                    <pre class="bg-gray-800 text-green-400 p-3 rounded text-xs overflow-auto">{
  "total_users": 15000,
  "bounce_rate": 0.45,
  "status": "success",
  "timestamp": "2025-01-01T22:30:00Z"
}</pre>
                </div>
            </div>
        </div>

        <!-- AI Recommendations -->
        <div class="bg-white p-6 rounded-lg shadow-lg border mb-6">
            <h2 class="text-2xl font-bold mb-4 text-orange-600 flex items-center">
                <span class="mr-2">ü§ñ</span>
                AI Agent Recommendations
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-orange-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-orange-800 mb-2">üö® High Priority</h3>
                    <ul class="text-sm text-gray-700 space-y-1">
                        <li>‚Ä¢ Reduce bounce rate from 45% to under 35%</li>
                        <li>‚Ä¢ Optimize homepage for better engagement</li>
                        <li>‚Ä¢ Improve site loading speed</li>
                        <li>‚Ä¢ Add clear call-to-action buttons</li>
                    </ul>
                </div>
                <div class="bg-blue-50 p-4 rounded-lg">
                    <h3 class="font-semibold text-blue-800 mb-2">üöÄ Growth Opportunities</h3>
                    <ul class="text-sm text-gray-700 space-y-1">
                        <li>‚Ä¢ Increase organic search traffic (currently 46.7%)</li>
                        <li>‚Ä¢ Create more engaging content for /about page</li>
                        <li>‚Ä¢ Implement referral program to boost referral traffic</li>
                        <li>‚Ä¢ Add contact forms to increase conversions</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- API Endpoints Documentation -->
        <div class="bg-white p-6 rounded-lg shadow-lg border mb-6">
            <h2 class="text-2xl font-bold mb-4 text-indigo-600 flex items-center">
                <span class="mr-2">üîó</span>
                MCP Server API Endpoints
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div class="bg-indigo-50 p-4 rounded-lg">
                    <h3 class="font-bold text-indigo-800 mb-2">GET /tools/get_website_traffic</h3>
                    <p class="text-sm text-gray-600 mb-2">Returns total users and bounce rate</p>
                    <code class="text-xs bg-gray-800 text-green-400 p-2 rounded block">curl localhost:8000/tools/get_website_traffic</code>
                </div>
                <div class="bg-indigo-50 p-4 rounded-lg">
                    <h3 class="font-bold text-indigo-800 mb-2">GET /tools/get_top_pages</h3>
                    <p class="text-sm text-gray-600 mb-2">Returns top performing pages list</p>
                    <code class="text-xs bg-gray-800 text-green-400 p-2 rounded block">curl localhost:8000/tools/get_top_pages</code>
                </div>
                <div class="bg-indigo-50 p-4 rounded-lg">
                    <h3 class="font-bold text-indigo-800 mb-2">GET /tools/get_traffic_sources</h3>
                    <p class="text-sm text-gray-600 mb-2">Returns traffic sources breakdown</p>
                    <code class="text-xs bg-gray-800 text-green-400 p-2 rounded block">curl localhost:8000/tools/get_traffic_sources</code>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="text-center py-6 text-gray-500">
            <p class="mb-2">üöÄ <strong>AI Website Analysis Dashboard</strong> - Powered by FastAPI MCP Server</p>
            <p class="text-sm">Dashboard created: <span id="timestamp"></span></p>
            <p class="text-sm mt-2">
                <a href="http://localhost:8000/docs" class="text-blue-600 hover:underline" target="_blank">üìÑ View API Documentation</a> |
                <a href="http://localhost:8000/tools/get_website_traffic" class="text-blue-600 hover:underline" target="_blank">üìä Test Live API</a>
            </p>
        </div>
    </div>

    <script>
        // Add current timestamp
        document.getElementById('timestamp').textContent = new Date().toLocaleString();
        
        // Simple health check for the MCP server
        fetch('http://localhost:8000/tools/get_website_traffic')
            .then(response => response.ok ? 
                document.querySelector('.bg-green-100').innerHTML = 
                '<div class="flex items-center"><span class="text-lg mr-2">‚úÖ</span><span class="font-semibold">MCP Server Status: </span><span class="ml-1 text-green-600">Online & Responding</span></div>' 
                : 
                document.querySelector('.bg-green-100').className = 'bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6'
            )
            .catch(() => {
                const statusBanner = document.querySelector('.bg-green-100, .bg-red-100');
                statusBanner.className = 'bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6';
                statusBanner.innerHTML = '<div class="flex items-center"><span class="text-lg mr-2">‚ùå</span><span class="font-semibold">MCP Server Status: </span><span class="ml-1">Offline - Please start the server</span></div>';
            });
    </script>
</body>
</html>

